<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<script src="js/qqv28.js"></script>
<script type="module" src="js/console.js"></script>
</head>
<body>
qqTextEditor




<script type="module">
import { createFullscreenPanel } from 'https://slachinov.github.io/Lib/pan/1all1.js';
import { createTopBottomMiddleLayout } from 'https://slachinov.github.io/Lib/pan/3pv2.js';
import { createBottomTopLayout } from 'https://slachinov.github.io/Lib/pan/2pv0.js';




// === Главный контейнер ===
let main = createFullscreenPanel({ style: { background: 'lightgray' } });




// === Верх / середина / низ ===
let layout = createTopBottomMiddleLayout(
main,
{ style: { background:'orange' } }, // верх
{ style: { background:'gray' } }, // середина
{ style: { background:'blue' } } // низ
);




// === Панель кнопок и редактор ===
let bottomLayout = createBottomTopLayout(
layout[2],
{}, // панель кнопок
{ style: { background:'lightgreen' } } // редактор
);
let edit = bottomLayout[1]; // это сам текстовый редактор




// === Базовый скин для всех кнопок ===
const btnSkin = qq.cs({
tag: 'button',
parent: bottomLayout[0],
style: { margin: '5px' }
});




// === Функция автоочистки текста ===
function cleanText(el) {
// заменяем все неразрывные пробелы на обычные
el.innerText = el.innerText.replace(/\u00A0/g, ' ');
}




// очистка при вводе и вставке
edit.addEventListener('input', () => cleanText(edit));
edit.addEventListener('paste', () => setTimeout(() => cleanText(edit), 0));




// === Кнопка EVAL ===
qq.ce(
btnSkin,
{
it: 'EVAL',
event: {
click() {
cleanText(edit); // очищаем текст перед eval
try {
eval(edit.innerText);
} catch (e) {
qq.er(e);
}
}
}
}
);




// === Кнопка CLEAR ===
qq.ce(
btnSkin,
{
it: 'CLEAR',
event: {
click() {
edit.innerText = '';
}
}
}
);




// === Пример добавления новых кнопок ===
// qq.ce(btnSkin, { it:'SAVE', event:{click:()=>{...}} });
// qq.ce(btnSkin, { it:'LOAD', event:{click:()=>{...}} });




</script>
</body>
</html>